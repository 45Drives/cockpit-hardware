var E=Object.defineProperty;var F=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var M=(t,s,o)=>s in t?E(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,k=(t,s)=>{for(var o in s||(s={}))H.call(s,o)&&M(t,o,s[o]);if(F)for(var o of F(s))A.call(s,o)&&M(t,o,s[o]);return t};import{r as g,w as b,a as D,b as N,c as f,o as i,d as c,e as r,n as $,t as h,f as u,g as x,P as O,h as j,i as m,F as L,j as P,k as _,l as w,m as q,p as R}from"./vendor.fc599622.js";const V=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function e(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}};V();var v=(t,s)=>{const o=t.__vccOpts||t;for(const[e,n]of s)o[e]=n;return o};const X={props:{moduleName:String,centerName:Boolean},setup(t){const s=g(!0);function o(){let e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=localStorage.getItem("color-theme");return n===null?e:n==="dark"}return s.value=o(),s.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),b(()=>s.value,(e,n)=>{localStorage.setItem("color-theme",e?"dark":"light"),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{lazy:!1}),{darkMode:s}},components:{SunIcon:D,MoonIcon:N}},J={class:"p-2 flex items-baseline justify-between bg-neutral-50 dark:bg-neutral-900 border-b border-gray-200 dark:border-gray-700",style:{"font-family":"Red Hat Text",position:"relative"}},W={class:"flex flex-row items-baseline basis-10"},z=["src"],T={class:"text-2xl"},K=r("span",{class:"text-gray-800 dark:text-red-600"},"Drives",-1),Y={key:0,class:"ml-5 text-red-800 dark:text-white text-2xl"};function G(t,s,o,e,n,l){const a=f("SunIcon"),d=f("MoonIcon");return i(),c("div",J,[r("div",W,[r("img",{class:"w-6 h-6 text-gray-50 mr-0.5 self-center",src:e.darkMode?"img/45d-fan-dark.svg":"img/45d-fan-light.svg"},null,8,z),r("h1",T,[r("span",{class:"text-red-800 dark:text-white font-bold",style:$({"font-family":"Source Sans Pro","font-size":"1.6rem"})},"45",4),K]),o.centerName?u("",!0):(i(),c("h1",Y,h(o.moduleName),1))]),o.centerName?(i(),c("h1",{key:0,class:"text-red-800 dark:text-white text-2xl",style:$({position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"})},h(o.moduleName),5)):u("",!0),r("button",{onClick:s[0]||(s[0]=p=>e.darkMode=!e.darkMode),id:"theme-toggle",type:"button",class:"text-gray-500 dark:text-gray-400 hover:bg-neutral-200 dark:hover:bg-neutral-700 focus:outline-none rounded-lg text-sm p-2.5 justify-self-end w-10 h-10 basis-10"},[e.darkMode?(i(),x(a,{key:0})):(i(),x(d,{key:1}))])])}var Q=v(X,[["render",G]]);const U={name:"P5Canvas",mounted(){const t=function(s){var o=2,e=35;s.setup=n=>{s.createCanvas(500,500).parent("p5-canvas")},s.draw=n=>{s.background(245);const l=s.frameCount*3,a=s.sin(s.radians(l))*50;s.push(),s.translate(0,s.height/2),s.fill(66,184,131),s.stroke(53,73,94),s.strokeWeight(5),s.ellipse(e,a,50,50),s.pop(),e+=o,(e>s.width-35||e<35)&&(o*=-1)}};new O(t)}},Z={id:"p5-canvas",class:"mx-auto"};function ee(t,s,o,e,n,l){return i(),c("div",Z)}var B=v(U,[["render",ee]]);const se={components:{XCircleIcon:j},props:{errorMsg:Array,FixButton:Boolean,FixButtonHandler:Function},setup(t){const s=g(t.errorMsg),o=g(t.FixButtonHandler);return b(()=>t.FixButtonHandler,e=>{o.value=e}),{errorMsg:s,FixButtonHandler:o}}},re={class:"flex items-center justify-evenly"},te={class:"rounded-md bg-red-50 p-4"},oe={class:"flex"},ne={class:"flex-shrink-0"},ae={class:"ml-3"},ie=r("h3",{class:"text-sm font-medium text-red-800"}," 45Drives Disks Encountered an Error ",-1),le={class:"mt-2 text-sm text-red-700"},de={role:"list",class:"list-disc pl-5 space-y-1 whitespace-pre"};function ce(t,s,o,e,n,l){const a=f("XCircleIcon");return i(),c("div",re,[r("div",te,[r("div",oe,[r("div",ne,[m(a,{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),r("div",ae,[ie,r("div",le,[r("ul",de,[(i(!0),c(L,null,P(e.errorMsg,d=>(i(),c("li",null,h(d),1))),256))])])])])]),o.FixButton?(i(),c("button",{key:0,onClick:s[0]||(s[0]=(...d)=>e.FixButtonHandler&&e.FixButtonHandler(...d)),type:"button",class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"}," Fix ")):u("",!0)])}var C=v(se,[["render",ce]]);function y(t=[],s={},o="out"){const e=_({loading:!1,status:0,stdout:"",stderr:""}),n=Boolean(s.promise);s.superuser||(s.superuser="require"),s.err=o==="out"?"out":"message";async function l(){e.loading=!0,e.status=0,e.stdout="",e.stderr="",cockpit.spawn(t,s).then((a,d)=>{e.stdout=a,e.stderr=d}).catch((a,d)=>{var p;e.stderr=d!=null?d:a.message,e.status=(p=a.exit_status)!=null?p:-1}).finally(()=>{e.loading=!1})}return l(),n?new Promise((a,d)=>{b(e,()=>{e.loading||(e.status!==0?d(k({},e)):a(k({},e)))})}):e}const ue={setup(){const t=g(),s=_({errorFlag:!1,errorMessage:[],showFixButton:!1,fixButtonHandler:()=>{console.log("Default handler was run for the fix button.")}}),o=g(),e=_({errorFlag:!1,errorMessage:[],showFixButton:!1,fixButtonHandler:()=>{console.log("Default handler was run for the fix button.")}});return console.log(s),console.log(e),{runServerInfo:async()=>{try{const a=await y(["/usr/share/cockpit/45drives-disks-vue/scripts/server_info"],{err:"out",superuser:"require",promise:!0});let d=JSON.parse(a.stdout);console.log(d),t.value=a.stdout,s.errorFlag=!1,s.errorMessage.length=0,s.showFixButton=!1}catch(a){console.log(a),s.errorFlag=!0,s.errorMessage.length=0,s.errorMessage.push(a.stderr),s.errorMessage.push("An error occurred when trying to run /usr/share/cockpit/45drives-disks/scripts/server_info"),s.showFixButton=!1}},runLsdev:async()=>{try{const a=await y(["/opt/45drives/tools/lsdev","--json"],{err:"out",superuser:"require",promise:!0});let d=JSON.parse(a.stdout);console.log(d),o.value=a.stdout,e.errorFlag=!1,e.errorMessage.length=0,e.showFixButton=!1}catch(a){console.log(a),e.errorFlag=!0,e.errorMessage.length=0,e.errorMessage.push(a.stderr),e.errorMessage.push("An error occurred when trying to run /opt/45drives/tools/lsdev"),e.showFixButton=!1}},serverInfo:t,serverInfoError:s,lsdevInfo:o,lsdevError:e}},components:{RefreshIconOutline:w,ErrorMessage:C}},fe={class:"card m-3 grow"},me=r("div",{class:"card-header p-5 border-b border-stone-200 dark:border-stone-500 dark:bg-stone-700 sm:flex sm:items-center sm:justify-between"},[r("h3",{class:"text-lg leading-6 font-semibold"},"Debug Section")],-1),ve={class:"card-body dark:bg-stone-700"},ge={class:"mt-3 sm:mt-0 sm:ml-4"},he={key:0},_e={class:"w-3/4 m-2"},pe={class:"whitespace-pre"},xe={key:1},ye={class:"mt-3 sm:mt-0 sm:ml-4"},ke={key:2,class:"mt-2 flex"},be={class:"w-3/4 m-2"},we={class:"whitespace-pre"},Ie={key:3};function Fe(t,s,o,e,n,l){const a=f("ErrorMessage");return i(),c("div",fe,[me,r("div",ve,[r("div",ge,[r("button",{type:"button",onClick:s[0]||(s[0]=d=>e.runServerInfo()),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},' run "server_info" ')]),e.serverInfoError.errorFlag?u("",!0):(i(),c("div",he,[r("div",_e,[r("div",pe,h(e.serverInfo),1)])])),e.serverInfoError.errorFlag?(i(),c("div",xe,[m(a,{errorMsg:e.serverInfoError.errorMessage,FixButton:e.serverInfoError.showFixButton,FixButtonHandler:e.serverInfoError.fixButtonHandler},null,8,["errorMsg","FixButton","FixButtonHandler"])])):u("",!0),r("div",ye,[r("button",{type:"button",onClick:s[1]||(s[1]=d=>e.runLsdev()),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},' run "lsdev" ')]),e.lsdevError.errorFlag?u("",!0):(i(),c("div",ke,[r("div",be,[r("div",we,h(e.lsdevInfo),1)])])),e.lsdevError.errorFlag?(i(),c("div",Ie,[m(a,{errorMsg:e.lsdevError.errorMessage,FixButton:e.lsdevError.showFixButton,FixButtonHandler:e.lsdevError.fixButtonHandler},null,8,["errorMsg","FixButton","FixButtonHandler"])])):u("",!0)])])}var Me=v(ue,[["render",Fe]]);const $e={props:{serverInfo:Object},setup(t){return{serverInfo:_(t.serverInfo)}}},Be={class:"card m-2 flex-auto"},Ce=r("div",{class:"card-header py-2 px-5 border-b border-stone-200 dark:border-stone-500 dark:bg-stone-700 sm:flex sm:items-center sm:justify-between"},[r("h3",{class:"text-lg leading-6 font-semibold"},"Server")],-1),Se={class:"card-body dark:bg-stone-700"},Ee=r("div",null,[r("div",null,[r("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Applicant Information"),r("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Personal details and application.")]),r("div",{class:"mt-5 border-t border-gray-200"},[r("dl",{class:"sm:divide-y sm:divide-gray-200"},[r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"Full name"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},"Margot Foster")]),r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"Application for"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},"Backend Developer")]),r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"Email address"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},"margotfoster@example.com")]),r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"Salary expectation"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},"$120,000")]),r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"About"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},"Fugiat ipsum ipsum deserunt culpa aute sint do nostrud anim incididunt cillum culpa consequat. Excepteur qui ipsum aliquip consequat sint. Sit id mollit nulla mollit nostrud in ea officia proident. Irure nostrud pariatur mollit ad adipisicing reprehenderit deserunt qui eu.")]),r("div",{class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4"},[r("dt",{class:"text-sm font-medium text-gray-500"},"Attachments"),r("dd",{class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},[r("ul",{role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},[r("li",{class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[r("div",{class:"w-0 flex-1 flex items-center"},[r("span",{class:"ml-2 flex-1 w-0 truncate"}," resume_back_end_developer.pdf ")]),r("div",{class:"ml-4 flex-shrink-0"},[r("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Download ")])]),r("li",{class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[r("div",{class:"w-0 flex-1 flex items-center"},[r("span",{class:"ml-2 flex-1 w-0 truncate"}," coverletter_back_end_developer.pdf ")]),r("div",{class:"ml-4 flex-shrink-0"},[r("a",{href:"#",class:"font-medium text-indigo-600 hover:text-indigo-500"}," Download ")])])])])])])])],-1);function He(t,s,o,e,n,l){return i(),c("div",Be,[Ce,r("div",Se,[Ee,q(" "+h(e.serverInfo),1)])])}var Ae=v($e,[["render",He]]);const De={components:{RefreshIconOutline:w},props:{diskInfo:Object},setup(t){const s=_(t.diskInfo),o=g("Click on a disk for more detail."),e=g(!0);return{diskInfo:s,wMsg:o,showWelcome:e}}},Ne={class:"card m-2 flex-auto flex flex-col"},Oe={class:"card-header py-2 px-5 border-b border-stone-200 dark:border-stone-500 dark:bg-stone-700 sm:flex sm:items-center sm:justify-between"},je=r("h3",{class:"text-lg leading-6 font-semibold"},"Disk Information",-1),Le={class:"mt-3 sm:mt-0 sm:ml-4"},Pe={type:"button",class:"card-refresh-btn"},qe={class:"card-body dark:bg-stone-700 grow flex flex-col"},Re={key:0},Ve={key:1,class:"grow flex justify-center items-center"},Xe={class:"p-5 bg-stone-100 dark:bg-stone-600 rounded-lg text-stone-500 dark:text-stone-300"};function Je(t,s,o,e,n,l){const a=f("RefreshIconOutline");return i(),c("div",Ne,[r("div",Oe,[je,r("div",Le,[r("button",Pe,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),r("div",qe,[e.showWelcome?u("",!0):(i(),c("div",Re," here is where the info goes.. and if it isn't there, it'll show the welcome. ")),e.showWelcome?(i(),c("div",Ve,[r("div",Xe,h(e.wMsg),1)])):u("",!0)])])}var We=v(De,[["render",Je]]);const ze={components:{RefreshIconOutline:w,P5Canvas:B}},Te={class:"card m-2"},Ke={class:"card-header py-2 px-5 border-b border-stone-200 dark:border-stone-500 dark:bg-stone-700 sm:flex sm:items-center sm:justify-between"},Ye=r("h3",{class:"text-lg leading-6 font-semibold"},"Disk Viewer",-1),Ge={class:"mt-3 sm:mt-0 sm:ml-4"},Qe={type:"button",class:"card-refresh-btn"},Ue={class:"card-body dark:bg-stone-700 flex-auto flex flex-col items-center content-center p-0"};function Ze(t,s,o,e,n,l){const a=f("RefreshIconOutline"),d=f("P5Canvas");return i(),c("div",Te,[r("div",Ke,[Ye,r("div",Ge,[r("button",Qe,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),r("div",Ue,[m(d)])])}var es=v(ze,[["render",Ze]]);const ss={name:"App",components:{P5Canvas:B,FfdHeader:Q,DebugBox:Me,ServerSection:Ae,DiskSection:We,CanvasSection:es,ErrorMessage:C},setup(){const t=_({serverInfo:{content:null,finished:!1,failed:!1,errorMessage:[],fixAvailable:!1,fixHandler:()=>{console.log("Default handler was run for the fix button.")}},lsdev:{content:null,finished:!1,failed:!1,errorMessage:[],fixAvailable:!1,fixHandler:()=>{console.log("Default handler was run for the fix button.")}}}),s=async()=>{try{const e=await y(["/usr/share/cockpit/45drives-disks-vue/scripts/server_info"],{err:"out",superuser:"require",promise:!0});let n=JSON.parse(e.stdout);console.log(n),t.serverInfo.content=n,t.serverInfo.finished=!0,t.serverInfo.failed=!1,t.serverInfo.fixAvailable=!1}catch(e){console.log(e),t.serverInfo.content=null,t.serverInfo.finished=!1,t.serverInfo.failed=!0,t.serverInfo.fixAvailable=!1,t.serverInfo.errorMessage.length=0,t.serverInfo.errorMessage.push("An error occurred when trying to run /usr/share/cockpit/45drives-disks/scripts/server_info"),t.serverInfo.errorMessage.push(e.stderr)}},o=async()=>{try{const e=await y(["/opt/45drives/tools/lsdev","--json"],{err:"out",superuser:"require",promise:!0});let n=JSON.parse(e.stdout);console.log(n),t.lsdev.content=n,t.lsdev.finished=!0,t.lsdev.failed=!1,t.lsdev.fixAvailable=!1}catch(e){console.log(e),t.lsdev.content=null,t.lsdev.finished=!1,t.lsdev.failed=!0,t.lsdev.fixAvailable=!1,t.lsdev.errorMessage.length=0,t.lsdev.errorMessage.push("An error occurred when trying to run /opt/45drives/tools/lsdev"),t.lsdev.errorMessage.push(e.stderr)}};return s(),o(),{preloadChecks:t,runServerInfo:s,runLsdev:o}}},rs={id:"App"},ts={class:"h-screen flex flex-col overflow-hidden"},os={class:"flex flex-wrap overflow-y-auto"},ns={class:"flex-auto flex items-center justify-evenly mt-2 mx-2"},as={key:0,class:"p-2 m-2"},is={key:1,class:"p-2 m-2"};function ls(t,s,o,e,n,l){const a=f("FfdHeader"),d=f("ServerSection"),p=f("CanvasSection"),S=f("DiskSection"),I=f("ErrorMessage");return i(),c("div",rs,[r("div",ts,[m(a,{moduleName:"Disks",centerName:""}),r("div",os,[e.preloadChecks.serverInfo.finished?(i(),x(d,{key:0,serverInfo:e.preloadChecks.serverInfo.content},null,8,["serverInfo"])):u("",!0),e.preloadChecks.serverInfo.finished&&e.preloadChecks.lsdev.finished?(i(),x(p,{key:1,serverInfo:e.preloadChecks.serverInfo.content,lsdev:e.preloadChecks.lsdev.content},null,8,["serverInfo","lsdev"])):u("",!0),e.preloadChecks.serverInfo.finished&&e.preloadChecks.lsdev.finished?(i(),x(S,{key:2,diskInfo:e.preloadChecks.lsdev.content},null,8,["diskInfo"])):u("",!0)]),r("div",ns,[e.preloadChecks.serverInfo.failed?(i(),c("div",as,[m(I,{errorMsg:e.preloadChecks.serverInfo.errorMessage,FixButton:e.preloadChecks.serverInfo.fixAvailable,FixButtonHandler:e.preloadChecks.serverInfo.fixHandler},null,8,["errorMsg","FixButton","FixButtonHandler"])])):u("",!0),e.preloadChecks.lsdev.failed?(i(),c("div",is,[m(I,{errorMsg:e.preloadChecks.lsdev.errorMessage,FixButton:e.preloadChecks.lsdev.fixAvailable,FixButtonHandler:e.preloadChecks.lsdev.fixHandler},null,8,["errorMsg","FixButton","FixButtonHandler"])])):u("",!0)])])])}var ds=v(ss,[["render",ls]]);R(ds).mount("#app");
