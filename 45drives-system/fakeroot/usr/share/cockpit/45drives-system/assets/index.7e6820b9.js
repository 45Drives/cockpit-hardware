var F=Object.defineProperty;var M=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var O=(n,s,o)=>s in n?F(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o,w=(n,s)=>{for(var o in s||(s={}))E.call(s,o)&&O(n,o,s[o]);if(M)for(var o of M(s))P.call(s,o)&&O(n,o,s[o]);return n};import{r as _,w as k,a as A,b as H,o as d,c as l,d as e,n as B,t as f,e as b,f as R,g,h as V,i as X,j as m,F as C,k as L,l as y,m as T}from"./vendor.52c3377c.js";const z=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};z();var v=(n,s)=>{const o=n.__vccOpts||n;for(const[t,r]of s)o[t]=r;return o};const D={props:{moduleName:String,centerName:Boolean},setup(n){const s=_(!0);function o(){let t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=localStorage.getItem("color-theme");return r===null?t:r==="dark"}return s.value=o(),s.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),k(()=>s.value,(t,r)=>{localStorage.setItem("color-theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{lazy:!1}),{darkMode:s}},components:{SunIcon:A,MoonIcon:H}},U={class:"p-2 flex items-baseline justify-between bg-neutral-50 dark:bg-neutral-900 border-b border-gray-200 dark:border-gray-700",style:{"font-family":"Red Hat Text",position:"relative"}},q={class:"flex flex-row items-baseline basis-10"},J=["src"],Q={class:"text-2xl"},G=e("span",{class:"text-gray-800 dark:text-red-600"},"Drives",-1),K={key:0,class:"ml-5 text-red-800 dark:text-white text-2xl"};function Y(n,s,o,t,r,i){const a=g("SunIcon"),c=g("MoonIcon");return d(),l("div",U,[e("div",q,[e("img",{class:"w-6 h-6 text-gray-50 mr-0.5 self-center",src:t.darkMode?"img/45d-fan-dark.svg":"img/45d-fan-light.svg"},null,8,J),e("h1",Q,[e("span",{class:"text-red-800 dark:text-white font-bold",style:B({"font-family":"Source Sans Pro","font-size":"1.6rem"})},"45",4),G]),o.centerName?b("",!0):(d(),l("h1",K,f(o.moduleName),1))]),o.centerName?(d(),l("h1",{key:0,class:"text-red-800 dark:text-white text-2xl",style:B({position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"})},f(o.moduleName),5)):b("",!0),e("button",{onClick:s[0]||(s[0]=h=>t.darkMode=!t.darkMode),id:"theme-toggle",type:"button",class:"text-gray-500 dark:text-gray-400 hover:bg-neutral-200 dark:hover:bg-neutral-700 focus:outline-none rounded-lg text-sm p-2.5 justify-self-end w-10 h-10 basis-10"},[t.darkMode?(d(),R(a,{key:0})):(d(),R(c,{key:1}))])])}var W=v(D,[["render",Y]]);function j(n=[],s={},o="out"){const t=V({loading:!1,status:0,stdout:"",stderr:""}),r=Boolean(s.promise);s.superuser||(s.superuser="require"),s.err=o==="out"?"out":"message";async function i(){t.loading=!0,t.status=0,t.stdout="",t.stderr="",cockpit.spawn(n,s).then((a,c)=>{t.stdout=a,t.stderr=c}).catch((a,c)=>{var h;t.stderr=c!=null?c:a.message,t.status=(h=a.exit_status)!=null?h:-1}).finally(()=>{t.loading=!1})}return i(),r?new Promise((a,c)=>{k(t,()=>{t.loading||(t.status!==0?c(w({},t)):a(w({},t)))})}):t}const Z={components:{XCircleIcon:X},props:{errorMsg:Array,FixButton:Boolean,FixButtonHandler:Function},setup(n){const s=_(n.errorMsg),o=_(n.FixButtonHandler);return k(()=>n.FixButtonHandler,t=>{o.value=t}),{errorMsg:s,FixButtonHandler:o}}},ee={class:"flex items-center justify-evenly"},te={class:"rounded-md bg-red-50 p-4"},se={class:"flex"},oe={class:"flex-shrink-0"},re={class:"ml-3"},ne=e("h3",{class:"text-sm font-medium text-red-800"}," 45Drives System Encountered an Error ",-1),ae={class:"mt-2 text-sm text-red-700"},ce={role:"list",class:"list-disc pl-5 space-y-1 whitespace-pre"};function ie(n,s,o,t,r,i){const a=g("XCircleIcon");return d(),l("div",ee,[e("div",te,[e("div",se,[e("div",oe,[m(a,{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),e("div",re,[ne,e("div",ae,[e("ul",ce,[(d(!0),l(C,null,L(t.errorMsg,c=>(d(),l("li",null,f(c),1))),256))])])])])]),o.FixButton?(d(),l("button",{key:0,onClick:s[0]||(s[0]=(...c)=>t.FixButtonHandler&&t.FixButtonHandler(...c)),type:"button",class:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none"}," Fix ")):b("",!0)])}var de=v(Z,[["render",ie]]);const le={components:{RefreshIconOutline:y,ErrorMessage:de},setup(){const n=_(""),s=_(""),o=_(""),t=_(""),r=_(""),i=_("img/45dlogo.png"),a=_(!1),c=_([]),h=_(!1),S=_(()=>{console.log("Default handler was run for the fix button.")}),I=p=>{if(p==""||p=="?")return"img/45dlogo.png";const u=/(Storinator|Stornado).*(AV15|Q30|S45|XL60|2U|C8|MI4).*/,x=p.match(u),N={Storinator:{AV15:"img/storinatorAV15.jpg",Q30:"img/storinatorQ30.jpg",S45:"img/storinatorS45.jpg",XL60:"img/storinatorXL60.jpg",C8:"img/storinatorC8.jpg",MI4:"img/storinatorMI4.jpg"},Stornado:{"2U":"img/stornado2U.jpg",AV15:"img/stornadoAV15.jpg"}};return x?N[x[1]][x[2]]:"img/45dlogo.png"},$=async()=>{n.value="Loading...",s.value="Loading...",o.value="Loading...",t.value="Loading...",r.value="Loading...",i.value="img/45dlogo.png";try{const p=await j(["/usr/share/cockpit/45drives-system-vue/scripts/server_info"],{err:"out",superuser:"require",promise:!0});let u=JSON.parse(p.stdout);n.value=u.Model,s.value=u["Chassis Size"],o.value=u.Serial,t.value=u.Motherboard.Manufacturer+" "+u.Motherboard["Product Name"],r.value=u.Motherboard["Serial Number"],i.value=I(u.Model)}catch(p){console.log(p);try{let u=JSON.parse(p.stderr);c.value.length=0,c.value.push(u.error_msg),c.value.push('Click "Fix" to run /opt/45drives/tools/server_identifier'),a.value=!0,u.error_msg=="/etc/45drives/server_info/server_info.json does not exist"&&(h.value=!0,S.value=async()=>{try{const x=await j(["/opt/45drives/tools/server_identifier"],{err:"out",superuser:"require",promise:!0});a.value=!1,c.value.length=0,h.value=!1,$()}catch(x){console.log(x),a.value=!0,c.value.length=0,c.value.push(x.stderr),c.value.push("An error occurred when running /opt/45drives/tools/server_identifier"),h.value=!1,console.log(h.value)}})}catch(u){console.log(u),a.value=!0,c.value.length=0,c.value.push(u.stderr),c.value.push("An error occurred when trying to run /usr/share/cockpit/45drives-system/scripts/server_info"),h.value=!1,console.log(h.value)}}};return $(),{sysModel:n,sysChassis:s,sysSerial:o,moboModel:t,moboSerial:r,serverImgPath:i,getSystemInfo:$,getSystemImgPath:I,fatalError:a,fatalErrorMsg:c,showFixButton:h,fixButtonHandler:S}}},me={class:"card"},ue={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},_e=e("h3",{class:"text-lg leading-6 font-semibold"},"System",-1),he={class:"mt-3 sm:mt-0 sm:ml-4"},fe={class:"card-body"},ge={key:0,class:"flex flex-row justify-evenly"},pe={class:"bg-white shadow overflow-hidden sm:rounded-lg"},ve={class:"border-b border-gray-200"},xe={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ye=e("dt",{class:"text-sm font-medium text-gray-500"},"Model",-1),be={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},$e={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},we=e("dt",{class:"text-sm font-medium text-gray-500"},"Chassis Size",-1),ke={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Se={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ie=e("dt",{class:"text-sm font-medium text-gray-500"},"Serial",-1),Me={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Oe={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Be=e("dt",{class:"text-sm font-medium text-gray-500"},"Motherboard",-1),Re={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},je={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ce=e("dt",{class:"text-sm font-medium text-gray-500"}," Motherboard Serial ",-1),Le={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Ne=["src"],Fe={key:1};function Ee(n,s,o,t,r,i){const a=g("RefreshIconOutline"),c=g("ErrorMessage");return d(),l("div",me,[e("div",ue,[_e,e("div",he,[e("button",{type:"button",class:"card-refresh-btn",onClick:s[0]||(s[0]=h=>t.getSystemInfo())},[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),e("div",fe,[t.fatalError?b("",!0):(d(),l("div",ge,[e("div",pe,[e("div",ve,[e("dl",null,[e("div",xe,[ye,e("dd",be,f(t.sysModel),1)]),e("div",$e,[we,e("dd",ke,f(t.sysChassis),1)]),e("div",Se,[Ie,e("dd",Me,f(t.sysSerial),1)]),e("div",Oe,[Be,e("dd",Re,f(t.moboModel),1)]),e("div",je,[Ce,e("dd",Le,f(t.moboSerial),1)])])])]),e("img",{src:t.serverImgPath,class:"object-contain h-72 rounded-none justify-self-center"},null,8,Ne)])),t.fatalError?(d(),l("div",Fe,[m(c,{errorMsg:t.fatalErrorMsg,FixButton:t.showFixButton,FixButtonHandler:t.fixButtonHandler},null,8,["errorMsg","FixButton","FixButtonHandler"])])):b("",!0)])])}var Pe=v(le,[["render",Ee]]);const Ae=[{socket:"CPU1",model:"Intel(R) Xeon(R) Silver 4210 CPU @ 2.20GHz (Generic)",temperature:"33.000 (C)"}],He={setup(){return{cpus:Ae}},components:{RefreshIconOutline:y}},Ve={class:"card"},Xe={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},Te=e("h3",{class:"text-lg leading-6 font-semibold"},"CPU",-1),ze={class:"mt-3 sm:mt-0 sm:ml-4"},De={type:"button",class:"card-refresh-btn"},Ue={class:"card-body"},qe={class:"mt-8 flex flex-col"},Je={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},Qe={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},Ge={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},Ke={class:"min-w-full divide-y divide-gray-300"},Ye=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"Socket"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Model"),e("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Temperature")])],-1),We={class:"divide-y divide-gray-200 bg-white"},Ze={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},et={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},tt={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"};function st(n,s,o,t,r,i){const a=g("RefreshIconOutline");return d(),l("div",Ve,[e("div",Xe,[Te,e("div",ze,[e("button",De,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),e("div",Ue,[e("div",qe,[e("div",Je,[e("div",Qe,[e("div",Ge,[e("table",Ke,[Ye,e("tbody",We,[(d(!0),l(C,null,L(t.cpus,c=>(d(),l("tr",{key:c.socket},[e("td",Ze,f(c.socket),1),e("td",et,f(c.model),1),e("td",tt,f(c.temperature),1)]))),128))])])])])])])])])}var ot=v(He,[["render",st]]);const rt={components:{RefreshIconOutline:y}},nt={class:"card"},at={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},ct=e("h3",{class:"text-lg leading-6 font-semibold"},"PCI",-1),it={class:"mt-3 sm:mt-0 sm:ml-4"},dt={type:"button",class:"card-refresh-btn"},lt=e("div",{class:"card-body"}," This is a test... ",-1);function mt(n,s,o,t,r,i){const a=g("RefreshIconOutline");return d(),l("div",nt,[e("div",at,[ct,e("div",it,[e("button",dt,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),lt])}var ut=v(rt,[["render",mt]]);const _t={components:{RefreshIconOutline:y}},ht={class:"card"},ft={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},gt=e("h3",{class:"text-lg leading-6 font-semibold"},"RAM",-1),pt={class:"mt-3 sm:mt-0 sm:ml-4"},vt={type:"button",class:"card-refresh-btn"},xt=e("div",{class:"card-body"}," This is a test... ",-1);function yt(n,s,o,t,r,i){const a=g("RefreshIconOutline");return d(),l("div",ht,[e("div",ft,[gt,e("div",pt,[e("button",vt,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),xt])}var bt=v(_t,[["render",yt]]);const $t={components:{RefreshIconOutline:y}},wt={class:"card"},kt={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},St=e("h3",{class:"text-lg leading-6 font-semibold"},"Network",-1),It={class:"mt-3 sm:mt-0 sm:ml-4"},Mt={type:"button",class:"card-refresh-btn"},Ot=e("div",{class:"card-body"}," This is a test... ",-1);function Bt(n,s,o,t,r,i){const a=g("RefreshIconOutline");return d(),l("div",wt,[e("div",kt,[St,e("div",It,[e("button",Mt,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),Ot])}var Rt=v($t,[["render",Bt]]);const jt={components:{RefreshIconOutline:y}},Ct={class:"card"},Lt={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},Nt=e("h3",{class:"text-lg leading-6 font-semibold"},"IPMI LAN",-1),Ft={class:"mt-3 sm:mt-0 sm:ml-4"},Et={type:"button",class:"card-refresh-btn"},Pt=e("div",{class:"card-body"}," This is a test... ",-1);function At(n,s,o,t,r,i){const a=g("RefreshIconOutline");return d(),l("div",Ct,[e("div",Lt,[Nt,e("div",Ft,[e("button",Et,[m(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),Pt])}var Ht=v(jt,[["render",At]]);const Vt={class:"h-full w-full overflow-y-scroll"},Xt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8 grow"},Tt={setup(n){return(s,o)=>(d(),l("div",Vt,[e("div",Xt,[m(Pe),m(ot),m(ut),m(bt),m(Rt),m(Ht)])]))}};const zt={class:"h-full flex flex-col overflow-hidden"},Dt={setup(n){return(s,o)=>(d(),l("div",zt,[m(W,{moduleName:"System",centerName:""}),m(Tt)]))}};T(Dt).mount("#app");
