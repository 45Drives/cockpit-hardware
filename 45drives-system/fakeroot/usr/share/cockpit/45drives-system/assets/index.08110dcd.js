var R=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var I=(n,s,o)=>s in n?R(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o,b=(n,s)=>{for(var o in s||(s={}))L.call(s,o)&&I(n,o,s[o]);if(k)for(var o of k(s))N.call(s,o)&&I(n,o,s[o]);return n};import{r as u,w as j,a as C,b as E,o as i,c as m,d as e,n as M,t as g,e as x,f as O,g as h,h as P,i as B,j as d,k as y,l as A}from"./vendor.ccb89afd.js";const F=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}};F();var p=(n,s)=>{const o=n.__vccOpts||n;for(const[t,r]of s)o[t]=r;return o};const V={props:{moduleName:String,centerName:Boolean},setup(n){const s=u(!0);function o(){let t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=localStorage.getItem("color-theme");return r===null?t:r==="dark"}return s.value=o(),s.value?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),j(()=>s.value,(t,r)=>{localStorage.setItem("color-theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{lazy:!1}),{darkMode:s}},components:{SunIcon:C,MoonIcon:E}},T={class:"p-2 flex items-baseline justify-between bg-neutral-50 dark:bg-neutral-900 border-b border-gray-200 dark:border-gray-700",style:{"font-family":"Red Hat Text",position:"relative"}},X={class:"flex flex-row items-baseline basis-10"},z=["src"],D={class:"text-2xl"},Q=e("span",{class:"text-gray-800 dark:text-red-600"},"Drives",-1),U={key:0,class:"ml-5 text-red-800 dark:text-white text-2xl"};function q(n,s,o,t,r,c){const a=h("SunIcon"),l=h("MoonIcon");return i(),m("div",T,[e("div",X,[e("img",{class:"w-6 h-6 text-gray-50 mr-0.5 self-center",src:t.darkMode?"img/45d-fan-dark.svg":"img/45d-fan-light.svg"},null,8,z),e("h1",D,[e("span",{class:"text-red-800 dark:text-white font-bold",style:M({"font-family":"Source Sans Pro","font-size":"1.6rem"})},"45",4),Q]),o.centerName?x("",!0):(i(),m("h1",U,g(o.moduleName),1))]),o.centerName?(i(),m("h1",{key:0,class:"text-red-800 dark:text-white text-2xl",style:M({position:"absolute",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"})},g(o.moduleName),5)):x("",!0),e("button",{onClick:s[0]||(s[0]=v=>t.darkMode=!t.darkMode),id:"theme-toggle",type:"button",class:"text-gray-500 dark:text-gray-400 hover:bg-neutral-200 dark:hover:bg-neutral-700 focus:outline-none rounded-lg text-sm p-2.5 justify-self-end w-10 h-10 basis-10"},[t.darkMode?(i(),O(a,{key:0})):(i(),O(l,{key:1}))])])}var J=p(V,[["render",q]]);function H(n=[],s={},o="out"){const t=P({loading:!1,status:0,stdout:"",stderr:""}),r=Boolean(s.promise);s.superuser||(s.superuser="require"),s.err=o==="out"?"out":"message";async function c(){t.loading=!0,t.status=0,t.stdout="",t.stderr="",cockpit.spawn(n,s).then((a,l)=>{t.stdout=a,t.stderr=l}).catch((a,l)=>{var v;t.stderr=l!=null?l:a.message,t.status=(v=a.exit_status)!=null?v:-1}).finally(()=>{t.loading=!1})}return c(),r?new Promise((a,l)=>{j(t,()=>{t.loading||(t.status!==0?l(b({},t)):a(b({},t)))})}):t}const K={components:{XCircleIcon:B},props:{errorMsg:String,FixButton:Boolean},setup(n){const s=u(n.errorMsg),o=u(n.FixButton);return{errorMsg:s,FixButton:o}}},Y={class:"rounded-md bg-red-50 p-4"},G={class:"flex"},W={class:"flex-shrink-0"},Z={class:"ml-3"},ee=e("h3",{class:"text-sm font-medium text-red-800"}," 45Drives System Encountered an Error ",-1),te={class:"mt-2 text-sm text-red-700"},se={role:"list",class:"list-disc pl-5 space-y-1"},oe={key:0};function re(n,s,o,t,r,c){const a=h("XCircleIcon");return i(),m("div",Y,[e("div",G,[e("div",W,[d(a,{class:"h-5 w-5 text-red-400","aria-hidden":"true"})]),e("div",Z,[ee,e("div",te,[e("ul",se,[e("li",null,g(t.errorMsg),1)])])])]),t.FixButton?(i(),m("button",oe,"Resolve")):x("",!0)])}var ne=p(K,[["render",re]]);const ae={components:{RefreshIconOutline:y,ErrorMessage:ne},setup(){const n=u(""),s=u(""),o=u(""),t=u(""),r=u(""),c=u("img/45dlogo.png"),a=u(!1),l=u(""),v=u(!1),$=f=>{if(f==""||f=="?")return"img/storinatorQ30.jpg";const _=/(Storinator|Stornado).*(AV15|Q30|S45|XL60|2U|C8|MI4).*/,S=f.match(_);return{Storinator:{AV15:"img/storinatorAV15.jpg",Q30:"img/storinatorQ30.jpg",S45:"img/storinatorS45.jpg",XL60:"img/storinatorXL60.jpg",C8:"img/storinatorC8.jpg",MI4:"img/storinatorMI4.jpg"},Stornado:{"2U":"img/stornado2U.jpg",AV15:"img/stornadoAV15.jpg"}}[S[1]][S[2]]},w=async()=>{n.value="Loading...",s.value="Loading...",o.value="Loading...",t.value="Loading...",r.value="Loading...",c.value="img/45dlogo.png";try{const f=await H(["/usr/share/cockpit/45drives-system-vue/scripts/server_info"],{err:"out",superuser:"require",promise:!0});let _=JSON.parse(f.stdout);n.value=_.Model,s.value=_["Chassis Size"],o.value=_.Serial,t.value=_.Motherboard.Manufacturer+" "+_.Motherboard["Product Name"],r.value=_.Motherboard["Serial Number"],c.value=$(_.Model)}catch(f){console.log(f);try{let _=JSON.parse(f.stderr);l.value=_.error_msg,a.value=!0,_.error_msg=="/etc/45drives/server_info/server_info.json does not exist"&&(v.value=!0)}catch{a.value=!0,l.value=f.stderr}}};return w(),{sysModel:n,sysChassis:s,sysSerial:o,moboModel:t,moboSerial:r,serverImgPath:c,getSystemInfo:w,getSystemImgPath:$,fatalError:a,fatalErrorMsg:l,showFixButton:v}}},ce={class:"card"},ie={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},de=e("h3",{class:"text-lg leading-6 font-semibold"},"System",-1),le={class:"mt-3 sm:mt-0 sm:ml-4"},me={class:"card-body"},_e={key:0,class:"flex flex-row justify-evenly"},ue={class:"bg-white shadow overflow-hidden sm:rounded-lg"},he={class:"border-b border-gray-200"},fe={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ge=e("dt",{class:"text-sm font-medium text-gray-500"},"Model",-1),pe={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ve={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ye=e("dt",{class:"text-sm font-medium text-gray-500"},"Chassis Size",-1),xe={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},be={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},$e=e("dt",{class:"text-sm font-medium text-gray-500"},"Serial",-1),we={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Se={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ke=e("dt",{class:"text-sm font-medium text-gray-500"},"Motherboard",-1),Ie={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Me={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Oe=e("dt",{class:"text-sm font-medium text-gray-500"}," Motherboard Serial ",-1),je={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},Re=["src"],Le={key:1};function Ne(n,s,o,t,r,c){const a=h("RefreshIconOutline"),l=h("ErrorMessage");return i(),m("div",ce,[e("div",ie,[de,e("div",le,[e("button",{type:"button",class:"card-refresh-btn",onClick:s[0]||(s[0]=v=>t.getSystemInfo())},[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),e("div",me,[t.fatalError?x("",!0):(i(),m("div",_e,[e("div",ue,[e("div",he,[e("dl",null,[e("div",fe,[ge,e("dd",pe,g(t.sysModel),1)]),e("div",ve,[ye,e("dd",xe,g(t.sysChassis),1)]),e("div",be,[$e,e("dd",we,g(t.sysSerial),1)]),e("div",Se,[ke,e("dd",Ie,g(t.moboModel),1)]),e("div",Me,[Oe,e("dd",je,g(t.moboSerial),1)])])])]),e("img",{src:t.serverImgPath,class:"object-contain h-72 rounded-none justify-self-center"},null,8,Re)])),t.fatalError?(i(),m("div",Le,[d(l,{errorMsg:t.fatalErrorMsg,FixButton:t.showFixButton},null,8,["errorMsg","FixButton"])])):x("",!0)])])}var Ce=p(ae,[["render",Ne]]);const Ee={components:{RefreshIconOutline:y}},Pe={class:"card"},Be={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},Ae=e("h3",{class:"text-lg leading-6 font-semibold"},"CPU",-1),Fe={class:"mt-3 sm:mt-0 sm:ml-4"},Ve={type:"button",class:"card-refresh-btn"},Te=e("div",{class:"card-body"}," This is a test... ",-1);function Xe(n,s,o,t,r,c){const a=h("RefreshIconOutline");return i(),m("div",Pe,[e("div",Be,[Ae,e("div",Fe,[e("button",Ve,[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),Te])}var ze=p(Ee,[["render",Xe]]);const De={components:{RefreshIconOutline:y}},Qe={class:"card"},Ue={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},qe=e("h3",{class:"text-lg leading-6 font-semibold"},"PCI",-1),Je={class:"mt-3 sm:mt-0 sm:ml-4"},He={type:"button",class:"card-refresh-btn"},Ke=e("div",{class:"card-body"}," This is a test... ",-1);function Ye(n,s,o,t,r,c){const a=h("RefreshIconOutline");return i(),m("div",Qe,[e("div",Ue,[qe,e("div",Je,[e("button",He,[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),Ke])}var Ge=p(De,[["render",Ye]]);const We={components:{RefreshIconOutline:y}},Ze={class:"card"},et={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},tt=e("h3",{class:"text-lg leading-6 font-semibold"},"RAM",-1),st={class:"mt-3 sm:mt-0 sm:ml-4"},ot={type:"button",class:"card-refresh-btn"},rt=e("div",{class:"card-body"}," This is a test... ",-1);function nt(n,s,o,t,r,c){const a=h("RefreshIconOutline");return i(),m("div",Ze,[e("div",et,[tt,e("div",st,[e("button",ot,[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),rt])}var at=p(We,[["render",nt]]);const ct={components:{RefreshIconOutline:y}},it={class:"card"},dt={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},lt=e("h3",{class:"text-lg leading-6 font-semibold"},"Network",-1),mt={class:"mt-3 sm:mt-0 sm:ml-4"},_t={type:"button",class:"card-refresh-btn"},ut=e("div",{class:"card-body"}," This is a test... ",-1);function ht(n,s,o,t,r,c){const a=h("RefreshIconOutline");return i(),m("div",it,[e("div",dt,[lt,e("div",mt,[e("button",_t,[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),ut])}var ft=p(ct,[["render",ht]]);const gt={components:{RefreshIconOutline:y}},pt={class:"card"},vt={class:"card-header p-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between"},yt=e("h3",{class:"text-lg leading-6 font-semibold"},"IPMI LAN",-1),xt={class:"mt-3 sm:mt-0 sm:ml-4"},bt={type:"button",class:"card-refresh-btn"},$t=e("div",{class:"card-body"}," This is a test... ",-1);function wt(n,s,o,t,r,c){const a=h("RefreshIconOutline");return i(),m("div",pt,[e("div",vt,[yt,e("div",xt,[e("button",bt,[d(a,{class:"h-5 w-5","aria-hidden":"true"})])])]),$t])}var St=p(gt,[["render",wt]]);const kt={class:"h-full w-full overflow-y-scroll"},It={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-8 grow"},Mt={setup(n){return(s,o)=>(i(),m("div",kt,[e("div",It,[d(Ce),d(ze),d(Ge),d(at),d(ft),d(St)])]))}};const Ot={class:"h-full flex flex-col overflow-hidden"},jt={setup(n){return(s,o)=>(i(),m("div",Ot,[d(J,{moduleName:"System",centerName:""}),d(Mt)]))}};A(jt).mount("#app");
